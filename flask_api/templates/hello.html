<!DOCTYPE html>
<html>
  <head lang="en">
    <meta charset="UTF-8">
    <title>Instructions Template Builder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- styles -->
      <link href="{{url_for('static', filename='css/multi-select.css')}}" media="screen" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div class="container">
      <h1>Instructions Template Builder</h1>
      <br>
      <div id="content"></div>
    </div>
    <!-- scripts -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script>window.jQuery || document.write('<script src="{{url_for('static', filename='jquery.js') }}">\x3C/script>')</script>
    <script type=text/javascript>
        $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    </script>

    <select id='department_instructions_options' multiple='multiple'>
    </select>

    <script src="{{url_for('static', filename='js/jquery.multi-select.js')}}" type="text/javascript"></script>
    <script type=text/javascript>
        $(function() {
            $('a#calculate').bind('click', function() {
                $.getJSON($SCRIPT_ROOT + '/_add_numbers', {
                    a: $('input[name="a"]').val(),
                    b: $('input[name="b"]').val()
                }, function(data) {
                    $("#result").text(data.result);
                });
                return false;
            });
        });

        $(document).ready(function() {
            $.getJSON( "department_instructions", function( data ) {
                console.log(data);
                console.log(data["department_instructions_list"]);

                $.each( data["department_instructions_list"], function( key, val ) {
                    $('#department_instructions_options').append($('<option>').text(val["name"]).attr('value', val["code"]));
                });

                $('#department_instructions_options').multiSelect();
            });
        });
    </script>
  </body>
</html>
